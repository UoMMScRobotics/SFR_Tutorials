<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Week 09 Continuous Assessment Walkthrough &mdash; SFR_Tutorials  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to SFR_Tutorials’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="contents.html" class="icon icon-home">
            SFR_Tutorials
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Welcome</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to SFR_Tutorials’s documentation!</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Continuous Assessment Tutorials</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Week 09 Continuous Assessment Walkthrough</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#step-1-make-a-package">Step 1 - Make a Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-2-start-a-simulation">Step 2 - Start a Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-3-start-slam">Step 3 - Start SLAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-4-drive-the-robot-around">Step 4 - Drive the Robot Around</a></li>
<li class="toctree-l2"><a class="reference internal" href="#step-5-saving-the-map">Step 5 - Saving the Map</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="contents.html">SFR_Tutorials</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="contents.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Week 09 Continuous Assessment Walkthrough</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/week09_ca.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="week-09-continuous-assessment-walkthrough">
<h1>Week 09 Continuous Assessment Walkthrough<a class="headerlink" href="#week-09-continuous-assessment-walkthrough" title="Link to this heading"></a></h1>
<p>The key deliverable of this week’s assessment is to deliver a map, generated by a robot traversing an environment using SLAM.
There are a few steps we must complete in order to get there.</p>
<ol class="arabic simple">
<li><p>Build a ROS package using ament_python</p></li>
<li><p>Start a simulation of a robot in an environment</p></li>
<li><p>Start SLAM to begin mapping</p></li>
<li><p>Drive the robot around</p></li>
<li><p>Use the map server to save an image and corresponding yaml file</p></li>
</ol>
<p>In this guide we will use map_maker_pkg as the package name, but this should be substituted with your ROS package name.</p>
<section id="step-1-make-a-package">
<h2>Step 1 - Make a Package<a class="headerlink" href="#step-1-make-a-package" title="Link to this heading"></a></h2>
<p>This package can be used both for the submission (which requires a ROS package), but also to hold a luanch file which will make running all this easier.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Why bother with a launch file at all - bring on lots of terminal sessions!
The biggest convenience of the launch file is being able to declare that all the nodes should “use_sim_time”, the time provided by the Gazebo simulator rather than the computer’s local clock.
This means that laser scan messages and transformations in time can be performed correctly. If nodes are running on different clocks, things very quickly fall down.</p>
</div>
<p>Make a package the usual way:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/MY_ROS_WS/src/</span>
<span class="go">ros2 pkg create map_maker_pkg --build-type ament_python</span>
<span class="go">cd map_maker_pkg</span>
<span class="go">mkdir launch</span>
<span class="go">mkdir maps</span>
</pre></div>
</div>
<p>Your setup.py file should have some extra lines added to include the launch and map directories:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<span class="hll"><span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">os</span>
</span><span class="hll"><span class="linenos"> 3</span><span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
</span><span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">package_name</span> <span class="o">=</span> <span class="s1">&#39;map_maker_pkg&#39;</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">setup</span><span class="p">(</span>
<span class="linenos"> 8</span>    <span class="n">name</span><span class="o">=</span><span class="n">package_name</span><span class="p">,</span>
<span class="linenos"> 9</span>    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0.0&#39;</span><span class="p">,</span>
<span class="linenos">10</span>    <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="n">package_name</span><span class="p">],</span>
<span class="linenos">11</span>    <span class="n">data_files</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">12</span>        <span class="p">(</span><span class="s1">&#39;share/ament_index/resource_index/packages&#39;</span><span class="p">,</span>
<span class="linenos">13</span>         <span class="p">[</span><span class="s1">&#39;resource/&#39;</span> <span class="o">+</span> <span class="n">package_name</span><span class="p">]),</span>
<span class="linenos">14</span>        <span class="p">(</span><span class="s1">&#39;share/&#39;</span> <span class="o">+</span> <span class="n">package_name</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;package.xml&#39;</span><span class="p">]),</span>
<span class="hll"><span class="linenos">15</span>        <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;share&#39;</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="s1">&#39;launch&#39;</span><span class="p">),</span> <span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;launch&#39;</span><span class="p">,</span> <span class="s1">&#39;*launch.[pxy][yma]*&#39;</span><span class="p">))),</span>
</span><span class="hll"><span class="linenos">16</span>        <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;share&#39;</span><span class="p">,</span> <span class="n">package_name</span><span class="p">,</span> <span class="s1">&#39;maps&#39;</span><span class="p">),</span> <span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;maps&#39;</span><span class="p">,</span> <span class="s1">&#39;*.[py][ga]*&#39;</span><span class="p">))),</span>
</span><span class="linenos">17</span>    <span class="p">],</span>
<span class="linenos">18</span>    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;setuptools&#39;</span><span class="p">],</span>
<span class="linenos">19</span>    <span class="n">zip_safe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos">20</span>    <span class="n">maintainer</span><span class="o">=</span><span class="s1">&#39;murilo&#39;</span><span class="p">,</span>
<span class="linenos">21</span>    <span class="n">maintainer_email</span><span class="o">=</span><span class="s1">&#39;your@email.org&#39;</span><span class="p">,</span>
<span class="linenos">22</span>    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;TODO: Package description&#39;</span><span class="p">,</span>
<span class="linenos">23</span>    <span class="n">license</span><span class="o">=</span><span class="s1">&#39;TODO: License declaration&#39;</span><span class="p">,</span>
<span class="linenos">24</span>    <span class="n">tests_require</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;pytest&#39;</span><span class="p">],</span>
<span class="linenos">25</span>    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
<span class="linenos">26</span>        <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos">27</span>        <span class="p">],</span>
<span class="linenos">28</span>    <span class="p">},</span>
<span class="linenos">29</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cd ~/MY_ROS_WS/</span>
<span class="go">colcon build</span>
<span class="go">source install/setup.bash</span>
</pre></div>
</div>
</section>
<section id="step-2-start-a-simulation">
<h2>Step 2 - Start a Simulation<a class="headerlink" href="#step-2-start-a-simulation" title="Link to this heading"></a></h2>
<p>A simulation environment has been provided for you as part of the synchronous tutorial material, namely gz_example_robot_description,
which includes a launch file sim_robot.launch.py.</p>
<p>If we wanted to use a joystick/gamepad for teleoperation, then here would be a good place to put a additional node to run.  As we will use the teleop_twist_keyboard package, its easier to have this in a separate terminal.</p>
<p>A simple launch file should look something like the file below.</p>
</section>
<section id="step-3-start-slam">
<h2>Step 3 - Start SLAM<a class="headerlink" href="#step-3-start-slam" title="Link to this heading"></a></h2>
<p>This once again is trivial.  By simply added an additional launch file, SLAM toolbox can be running to provide Simultaneous Localisation and Mapping (SLAM).
Our launch file should look something like the one below.</p>
</section>
<section id="step-4-drive-the-robot-around">
<h2>Step 4 - Drive the Robot Around<a class="headerlink" href="#step-4-drive-the-robot-around" title="Link to this heading"></a></h2>
<p>If you haven’t already inclued a joystick teleop node, then use the keyboard teleop node in a separate terminal.
By manually driving the robot around, we can fill in the map of the environment.  Remember, that slam toolbox utilises pose graph optimisation, therefore, it likes to see loops in the data to perform closure (and provide a better estimate).</p>
</section>
<section id="step-5-saving-the-map">
<h2>Step 5 - Saving the Map<a class="headerlink" href="#step-5-saving-the-map" title="Link to this heading"></a></h2>
<p>We could add this portion to our launch file, but at this stage it would be unnecessary.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to SFR_Tutorials’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Andy West.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>